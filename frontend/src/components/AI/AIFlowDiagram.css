.react-flow__edge-path {
    stroke: #a1a1aa; /* Default subtle grey */
    stroke-width: 2.5px !important; /* Visible stroke width */
    transition: stroke 0.2s ease-out, stroke-width 0.2s ease-out;
    pointer-events: none; /* Disable direct pointer events on the visible path */
  }
  .react-flow__edges {
    pointer-events: all !important;
  }

/* Add animation for the threat panel */
@keyframes slideIn {
  from {
    transform: translateX(-10px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Minimap toggle button styles */
.minimap-toggle-button {
  border-radius: 50%;
  background: white;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  border: 1px solid rgba(124, 101, 246, 0.3);
  transition: all 0.2s ease;
  cursor: pointer;
  z-index: 10;
}

.minimap-toggle-button:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 8px rgba(124, 101, 246, 0.2);
  border-color: rgba(124, 101, 246, 0.5);
}

.minimap-toggle-button svg {
  color: rgba(124, 101, 246, 0.8);
  width: 16px;
  height: 16px;
}

.minimap-toggle-button:active {
  transform: scale(0.95);
}

/* Minimap styles */
.react-flow__minimap {
  transition: all 0.3s ease;
}

.react-flow__minimap:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(124, 101, 246, 0.15);
  border-color: rgba(124, 101, 246, 0.5) !important;
}

.threat-panel-transition {
  animation: slideIn 0.3s ease-out;
}

/* Add hover effect for threat cards */
.threat-card-hover-effect:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transform: translateY(-1px);
  transition: all 0.2s;
}

/* Add pulsing effect for high threats */
@keyframes pulse {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
  100% {
    opacity: 1;
  }
}

.threat-badge-pulse {
  animation: pulse 1.5s infinite;
}

/* Styles for threat badges */
.threat-badge {
  position: absolute;
  right: -4px;
  top: -4px;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 10px;
  font-weight: bold;
  color: white;
}

.threat-badge-high {
  background-color: #ef4444;
  box-shadow: 0 0 0 2px white;
}

.threat-badge-medium {
  background-color: #f59e0b;
  box-shadow: 0 0 0 2px white;
}

.threat-badge-low {
  background-color: #3b82f6;
  box-shadow: 0 0 0 2px white;
}

/* Threat indicator positioning */
.threat-indicator {
  position: absolute;
  top: -5px;
  right: -5px;
  display: flex;
  flex-direction: row;
  gap: 2px;
  cursor: pointer;
}

/* Modern gradient background for diagram pane */
.diagram-background {
  background: linear-gradient(135deg, rgba(242, 244, 248, 0.8) 0%, rgba(230, 233, 240, 0.7) 50%, rgba(223, 227, 236, 0.6) 100%);
  backdrop-filter: blur(8px);
  position: absolute;
  inset: 0;
  z-index: -1;
}

/* Animated gradient pattern for diagram background */
.diagram-pattern {
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(circle at 25% 25%, rgba(124, 101, 246, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(124, 101, 246, 0.05) 0%, transparent 50%);
  opacity: 0.7;
  z-index: -1;
  animation: patternMove 20s ease-in-out infinite alternate;
}

@keyframes patternMove {
  0% {
    background-position: 0% 0%;
  }
  100% {
    background-position: 100% 100%;
  }
}

/* Animation for node floating */
@keyframes float {
  0% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
  100% {
    transform: translateY(0px);
  }
}

/* Animation for slower floating nodes */
@keyframes floatSlow {
  0% {
    transform: translateY(0px) scale(1);
  }
  50% {
    transform: translateY(-15px) scale(1.05);
  }
  100% {
    transform: translateY(0px) scale(1);
  }
}

/* Animation for delayed floating */
@keyframes floatDelay {
  0% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-8px) rotate(2deg);
  }
  100% {
    transform: translateY(0px) rotate(0deg);
  }
}

/* Connection path animation */
.connection-path {
  stroke-dasharray: 6, 4;
  animation: dashOffset 30s linear infinite;
}

@keyframes dashOffset {
  0% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: -500;
  }
}

/* Animated particle glow */
.particle1, .particle2, .particle3, .particle4, .particle5, .particle6, .particle7, .particle8, .particle9, .particle10, .particle11 {
  filter: drop-shadow(0 0 3px rgba(124, 101, 246, 0.8));
}

/* Apply animations to floating elements */
.animate-float {
  animation: float 4s ease-in-out infinite;
}

.animate-float-slow {
  animation: floatSlow 6s ease-in-out infinite;
}

.animate-float-delay {
  animation: floatDelay 5s ease-in-out infinite;
  animation-delay: 1s;
}

/* Update animation for placeholder nodes - gentle movement near original position */
@keyframes floatNode {
  0% {
    transform: translate(0, 0) scale(1);
  }
  20% {
    transform: translate(20px, -15px) scale(0.98);
  }
  40% {
    transform: translate(35px, 0px) scale(0.97);
  }
  60% {
    transform: translate(20px, 15px) scale(0.98);
  }
  80% {
    transform: translate(-15px, 10px) scale(0.97);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

/* Create variations of the float animation for different nodes */
@keyframes floatNodeAlt1 {
  0% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(-25px, 15px) scale(0.98);
  }
  50% {
    transform: translate(-15px, 30px) scale(0.97);
  }
  75% {
    transform: translate(15px, 15px) scale(0.98);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

@keyframes floatNodeAlt2 {
  0% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(30px, -20px) scale(0.98);
  }
  66% {
    transform: translate(-20px, -15px) scale(0.98);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

/* Create a diagonal movement pattern */
@keyframes floatNodeAlt3 {
  0% {
    transform: translate(0, 0) scale(1);
  }
  20% {
    transform: translate(-25px, -20px) scale(0.97);
  }
  40% {
    transform: translate(-15px, -10px) scale(0.98);
  }
  60% {
    transform: translate(10px, 10px) scale(0.99);
  }
  80% {
    transform: translate(25px, 20px) scale(0.98);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

/* Create a horizontal-dominant movement pattern */
@keyframes floatNodeAlt4 {
  0% {
    transform: translate(0, 0) scale(1);
  }
  30% {
    transform: translate(30px, -10px) scale(0.97);
  }
  70% {
    transform: translate(-30px, 10px) scale(0.97);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

/* Apply base animation to all placeholder nodes but reduce the duration */
.placeholder-node {
  filter: drop-shadow(0 6px 10px rgba(0, 0, 0, 0.1));
  animation: floatNode 30s ease-in-out infinite;
  transition: all 0.3s ease;
  position: relative;
  z-index: 1;
}

/* Apply different animation variations with reduced durations */
.placeholder-node:nth-child(2n) {
  animation-name: floatNodeAlt1;
  animation-duration: 32s;
  z-index: 2;
}

.placeholder-node:nth-child(3n) {
  animation-name: floatNodeAlt2;
  animation-duration: 34s;
  z-index: 3;
}

.placeholder-node:nth-child(3n+1) {
  animation-name: floatNodeAlt3;
  animation-duration: 36s;
  z-index: 1;
}

.placeholder-node:nth-child(4n+2) {
  animation-name: floatNodeAlt4;
  animation-duration: 38s;
  z-index: 2;
}

/* Apply different delays to make the animation more natural */
.placeholder-node:nth-child(1) {
  animation-delay: 0s;
}

.placeholder-node:nth-child(2) {
  animation-delay: 3s;
}

.placeholder-node:nth-child(3) {
  animation-delay: 6s;
}

.placeholder-node:nth-child(4) {
  animation-delay: 9s;
}

.placeholder-node:nth-child(5) {
  animation-delay: 12s;
}

.placeholder-node:nth-child(6) {
  animation-delay: 15s;
}

.placeholder-node:nth-child(7) {
  animation-delay: 18s;
}

.placeholder-node:nth-child(8) {
  animation-delay: 21s;
}

.placeholder-node:hover {
  filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.15));
  transform: translateY(-3px);
  animation-play-state: paused;
}

@keyframes fadeInNode {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes pulseConnection {
  0% {
    stroke-dashoffset: 24;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.placeholder-connection {
  stroke-dasharray: 5, 5;
  animation: pulseConnection 1.5s linear infinite;
}

/* Fade-in animation for nodes */
.node-fade-in {
  animation: fadeInNode 0.5s ease-out forwards;
}

.node-fade-in:nth-child(2) {
  animation-delay: 0.1s;
}

.node-fade-in:nth-child(3) {
  animation-delay: 0.2s;
}

.node-fade-in:nth-child(4) {
  animation-delay: 0.3s;
}

.node-fade-in:nth-child(5) {
  animation-delay: 0.4s;
}

.node-fade-in:nth-child(6) {
  animation-delay: 0.5s;
}

/* Node label styles - enhance for better visibility with no node background */
.node-label {
  position: absolute;
  bottom: -25px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  font-size: 12px;
  font-weight: 500;
  font-family: 'Geneva', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: rgba(55, 65, 81, 1);
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.9);
  background: linear-gradient(135deg, rgba(250, 250, 255, 0.9) 0%, rgba(240, 242, 250, 0.9) 100%);
  padding: 3px 10px;
  border-radius: 12px;
  backdrop-filter: blur(4px);
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid rgba(255, 255, 255, 0.6);
  z-index: 2;
}

/* Placeholder node label specific styles */
.placeholder-node .node-label {
  position: absolute;
  bottom: -25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  font-weight: 500;
  font-family: 'Geneva', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: #374151;
  white-space: nowrap;
  background: linear-gradient(135deg, rgba(250, 250, 255, 0.9) 0%, rgba(240, 242, 250, 0.9) 100%);
  border-radius: 12px;
  padding: 3px 10px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(4px);
}

/* Updated styles for the remote SVG icons */
.aws-icon svg {
  fill: white !important;
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

.gcp-icon svg {
  filter: brightness(1.2) contrast(1.1);
  padding: 4px;
  fill: white !important; /* Force white fill for better visibility */
  stroke: white;
  stroke-width: 0.5;
}

/* New enhanced style specifically for GCP Cloud Run */
.gcp-icon svg path {
  fill: white !important;
}

/* Update any GCP-specific paths for better visibility */
.gcp-icon svg g path {
  fill: white !important;
  stroke: white;
  stroke-width: 0.1;
}

.gcp-icon-white svg {
  fill: white !important;
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

.network-icon svg {
  fill: white !important;
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

/* Enhance box shadow for all nodes */
[class*="rounded-xl"] {
  box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.1), 0 4px 8px -2px rgba(0, 0, 0, 0.06) !important;
}

/* Ensure elements remain visible even when they animate far away */
.empty-canvas-container {
  overflow: visible !important;
  z-index: 5;
  transition: opacity 0.3s ease-out;
}

.empty-canvas {
  overflow: visible !important;
}

/* Add smooth drag transition for nodes */
.react-flow__node {
  transition: transform 0.1s ease-out;
  z-index: 10 !important;
}

/* Override default React Flow selection styling */
.react-flow__node.react-flow__node-default.selected {
  box-shadow: none !important;
  outline: none !important;
  border: none !important;
}

/* Override purple outline when dragging */
.react-flow__node.react-flow__node-default.dragging {
  box-shadow: none !important;
  outline: none !important;
  border: none !important;
}

/* Hide resize handles by default and show subtle ones only on hover */
.react-flow__nodesselection-rect {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Make node selection completely invisible */
.react-flow__node.selected::before {
  display: none !important;
}

.react-flow__node.selected::after {
  display: none !important;
}

/* Override any possible box shadows on selected nodes */
.react-flow__node.selected [class*="rounded-xl"] {
  box-shadow: none !important;
}

/* Make node icons more prominent since they won't have a background */
.node-icon-container {
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  transition: transform 0.2s ease-out, filter 0.2s ease-out;
}

.node-icon-container:hover {
  transform: scale(1.1);
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
}

/* Enhance handle visibility since nodes have no background */
.react-flow__handle {
  width: 6px !important;
  height: 6px !important;
  background-color: white !important;
  border: 2px solid #7C65F6 !important;
  transition: opacity 0.2s ease-out, transform 0.2s ease-out;
  opacity: 0.8;
  z-index: 11 !important;
}

.react-flow__handle:hover {
  opacity: 1;
  transform: scale(1.3);
}

/* Custom node styling - override base node styles */
.react-flow__node.custom-node {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  /* width: auto !important; */ /* Size handled by component */
  /* height: auto !important; */ /* Size handled by component */
  padding: 0 !important; 
  backdrop-filter: none !important; 
  overflow: visible !important; 
}

/* Override any hover/selection styles that might add backgrounds */
.react-flow__node:hover,
.react-flow__node.selected {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Welcome message styling */
.welcome-message {
  animation: fadeInUp 0.8s ease-out forwards;
  max-width: 500px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 249, 251, 0.85) 100%);
  backdrop-filter: blur(8px);
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(124, 101, 246, 0.2);
  max-width: 600px;
  z-index: 5;
  animation: fadeInUp 0.5s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.welcome-text {
  animation: pulse 2s infinite;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

@keyframes pulse {
  0% {
    opacity: 0.8;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.8;
  }
}

/* Ensure React Flow components have higher z-index */
.react-flow__node {
  z-index: 10 !important;
}

.react-flow__edge {
  z-index: 10 !important;
}

.react-flow__handle {
  z-index: 11 !important;
}

/* Ensure React Flow pane has higher z-index than empty canvas */
.react-flow__pane {
  z-index: 8 !important;
}

/* Edge Hover Effects */
@keyframes edgeFlow {
  to {
    stroke-dashoffset: -16; /* Animate the dash offset */
  }
}

/* Add an invisible wider stroke for easier hover detection */
.react-flow__edge .react-flow__edge-interaction {
  stroke-width: 30px !important; /* INCREASED - Much wider invisible line for hovering */
  stroke: transparent;
  pointer-events: stroke;
  cursor: pointer;
  z-index: 11 !important; /* Ensure interaction layer is above the visible path */
}

/* Edge Hover Effects - Applied when hovering the interaction layer */
.react-flow__edge:hover .react-flow__edge-path {
  stroke-width: 4.5px !important; /* Make VISIBLE edge noticeably thicker on hover */
  stroke: #00529B !important; /* Change VISIBLE edge color to dark blue on hover */
  /* stroke-dasharray: 8 8; */ /* Dashes for animation - REMOVED */
  /* animation: edgeFlow 0.7s linear infinite; */ /* Apply the flow animation - REMOVED */
  /* cursor: pointer; */ /* Cursor is handled by interaction layer */
}

/* Keep arrowhead color matching */
.react-flow__edge:hover .react-flow__arrowhead path {
  fill: #00529B !important; /* Match arrowhead color */
  stroke: #00529B !important;
  transition: fill 0.2s ease-out, stroke 0.2s ease-out;
}

/* --- Node Selection Overrides --- */
/* Ensure no background/border on the main node element itself when selected */
.react-flow__node.selected,
.react-flow__node.dragging {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  background: transparent !important; /* Force transparent background */
}

/* Target the specific custom node class to be extra sure */
.react-flow__node.custom-node.selected > div {
  border: none !important;
  box-shadow: none !important;
}

/* Target the inner container of the custom node when selected */
.react-flow__node.custom-node.selected .rounded-xl {
    border-color: transparent !important; /* Override any border color */
    box-shadow: none !important; /* Remove any potential shadow */
}

/* Ensure NodeResizer handles don't imply a border on the node */
.react-flow__node.selected .react-flow__handle {
    border-color: #888 !important; /* Make handles grey, not implying a node border */
}
/* --- End Node Selection Overrides --- */

/* Add styles to ensure edges remain visible during dragging */
.react-flow__edge {
  pointer-events: all;
  z-index: 5;
}

/* Style for edges during node dragging */
.react-flow__node.dragging + .react-flow__edge {
  opacity: 0.8;
}

/* Make sure dragged nodes stay on top */
.react-flow__node.dragging {
  z-index: 10;
}

/* Ensure nodes are interactive */
.react-flow__node {
  cursor: grab;
}

.react-flow__node:active {
  cursor: grabbing;
}

/* Add this to AIFlowDiagram.css */
.layer-container {
  transition: all 0.3s ease;
  pointer-events: none;
}

.layer-title {
  transition: all 0.3s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  font-family: 'Inter', system-ui, sans-serif;
  font-weight: 600;
  letter-spacing: -0.01em;
}

/* Layer container styles for better visibility */
.layer-container {
  transition: all 0.3s ease;
  pointer-events: none;
  position: absolute;
  z-index: -5 !important; /* Force behind other nodes */
}

/* Ensure layer containers are visible */
.react-flow__node.react-flow__node-layerGroup {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  z-index: -1 !important;
}

/* Make layer title more visible */
.layer-title {
  transition: all 0.3s ease;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
  font-family: 'Inter', system-ui, sans-serif;
  font-weight: 600;
  letter-spacing: -0.01em;
  z-index: 1;
  white-space: nowrap;
}

/* Override default node selection styles for layer groups */
.react-flow__node-layerGroup.selected {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
}

/* Ensure layer groups are properly visible on hover */
.react-flow__node-layerGroup:hover .layer-container {
  filter: brightness(1.05);
}

/* Animate layer appearance for better visibility */
@keyframes fadeInLayer {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.layer-container {
  animation: fadeInLayer 0.5s ease-out forwards;
}


/* Styles for threat badges on nodes */

/* Threat indicator positioning */
.threat-indicator {
  position: absolute;
  top: -5px;
  right: -5px;
  display: flex;
  flex-direction: row;
  gap: 2px;
  z-index: 10;
  pointer-events: none; /* Ensure badges don't interfere with node interactions */
}

/* Styles for threat badges */
.threat-badge {
  position: relative;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 10px;
  font-weight: bold;
  color: white;
  box-shadow: 0 0 0 2px white;
  margin-left: 3px;
}

.threat-badge-high {
  background-color: #ef4444;
}

.threat-badge-medium {
  background-color: #f59e0b;
}

.threat-badge-low {
  background-color: #3b82f6;
}

/* Add pulsing effect for high threats */
@keyframes pulse {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.threat-badge-pulse {
  animation: pulse 1.5s infinite;
}

/* Improve visibility of threat badges */
.threat-badge svg {
  width: 10px;
  height: 10px;
  margin-right: 1px;
}

/* Badge counter style */
.threat-badge span {
  font-size: 9px;
  font-weight: 700;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Make node container relative to position badges correctly */
.custom-node {
  position: relative !important;
}

/* Ensure threat badges stay on top */
.react-flow__node-default .threat-indicator {
  z-index: 20;
}

/* Add tooltip to show more information on hover */
.threat-badge:hover::after {
  content: attr(title);
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 10px;
  white-space: nowrap;
  pointer-events: none;
}

/* Enhanced ThreatCount component styles */
.threat-count {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
  border-radius: 4px;
  padding: 2px 6px;
  transition: all 0.2s ease;
  cursor: pointer;
}

.threat-count:hover {
  transform: translateY(-1px);
}

.threat-count-high {
  background-color: rgba(239, 68, 68, 0.15);
  color: rgb(185, 28, 28);
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.threat-count-medium {
  background-color: rgba(245, 158, 11, 0.15);
  color: rgb(180, 83, 9);
  border: 1px solid rgba(245, 158, 11, 0.3);
}

.threat-count-low {
  background-color: rgba(59, 130, 246, 0.15);
  color: rgb(30, 64, 175);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* Enhance node threat badges visibility with shadow */
.threat-badge {
  box-shadow: 0 0 0 2px white, 0 2px 4px rgba(0, 0, 0, 0.2);
}